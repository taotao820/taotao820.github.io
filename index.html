<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
    integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
  <!-- <link rel="preload" href="./img/bg1.webp" as="image"> -->
  <link rel="stylesheet" href="./css/main.css">
  <title>Welcome To My Website</title>

</head>

<body id="bg-img">
  <img src="./img/bg1.webp" id="bg-img1"></img>
  <header>
    <div class="menu-btn">
      <div class="btn-line"></div>
      <div class="btn-line"></div>
      <div class="btn-line"></div>
    </div>
    <nav class="menu">
      <div class="menu-branding">
        <div class="portrait"></div>
      </div>
      <ul class="menu-nav">
        <li class="nav-item current"><a href="/" class="nav-link">Home</a></li>
        <li class="nav-item"><a href="about.html" class="nav-link">My Resume</a></li>
        <li class="nav-item"><a href="work.html" class="nav-link">My Works</a></li>
        <li class="nav-item"><a href="contact.html" class="nav-link">Contact Me</a></li>
      </ul>
    </nav>
  </header>
  <main id="home">
    <!-- <h1 class="lg-heading text-secondary">胥蕙涛
    </h1> -->
    <h1 class="lg-heading">
      <span
        id="home-title"
        data-text='["I am HuiTao","Web Developer"]'
      >
      <span class="mark"></span>
      </span>
    </h1>
    <h2 class="sm-heading">Web Developer, Programmer<br>xht820@gmail.com</h2>
    <div class="icons">
      <a href="mailto:xht820@gmail.com">
        <i class="far fa-envelope fa-2x"></i>
      </a>
      <a href="https://github.com/taotao820">
        <i class="fab fa-github fa-2x"></i>
      </a>
      <a href="#">
        <i class="fab fa-linkedin fa-2x"></i>
      </a>
    </div>
  </main>
  <script>
    const img = document.getElementById('bg-img1')
    let newImg = new Image()
    newImg.onload = function () {
      img.src = './img/bg1.webp'
      img.style.display = 'block'
    }
    newImg.src = './img/bg1.webp'

    //home 标题打字机
const titleEle = document.querySelector("#home-title")
const title = JSON.parse(titleEle.getAttribute('data-text'))

let index = 0;
let charIndex = 0;
let delta = 500;

let start = null;
let isDeleteing = false;

function typeText(time){
  window.requestAnimationFrame(typeText)
  if(!start) start = time;
  let progress = time - start;
  if(progress>delta){
    let text = title[index]
    if(!isDeleteing){
      titleEle.innerHTML = text.slice(0, ++charIndex)
      delta = 500 - Math.random() * 400;
    }else{
      titleEle.innerHTML = text.slice(0, charIndex--)
    }
    start = time;
    if(charIndex === text.length){
      isDeleteing = true;
      delta = 200;
      start = time + 1200;
    }
    if(charIndex < 0){
      isDeleteing = false;
      start = time + 1200;
      index = ++index % title.length
    }
  }
}

window.requestAnimationFrame(typeText)
  </script>
  <script src="js/main.js"></script>
  <script src="js/i18n.js"></script>
  <script>

  </script>
</body>

</html>